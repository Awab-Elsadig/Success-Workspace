<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="icon" type="image/x-icon" href="./Assets/Page_Icons/membership.png" />
      <title>Membership</title>

      <!-- Google Fonts -->
      <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />

      <!-- Stylesheets -->

      <link rel="stylesheet" href="./CSS/main.css" />
      <!-- FontAwesome -->
      <link rel="stylesheet" href="./CSS/all.min.css" />
   </head>
   <body>
      <div class="container monthly__membership__container">
         <!-- ========== Top Section =============== -->
         <div class="top">
            <a href="membership.html" class="back__button button">
               <span class="button__icon"><i class="fa-solid fa-arrow-left"></i></span>
               <span class="button__text"><h3>عودة</h3></span>
            </a>
         </div>

         <!-- ========== Membership Section =============== -->
         <section class="middle">
            <form id="telegramForm">
               <div class="form__name">
                  <h2 class="name__title">الأسم</h2>
                  <input type="text" name="name" placeholder="اسمك هنا" required class="name__input" />
               </div>
               <div class="form__phone">
                  <h2 class="phone__title">رقم الجوال</h2>
                  <input type="text" name="phone__number" placeholder="رقم الجوال" required class="phone__input" />
               </div>
               <button type="submit" class="send__button">ارسال</button>
            </form>
         </section>

         <!-- ========== Bottom Section =============== -->
         <!-- Empty -->

         <script>
            document.getElementById("telegramForm").addEventListener("submit", function (event) {
               event.preventDefault();

               // Get form data
               const formData = new FormData(event.target);
               const name = formData.get("name");
               const phone = formData.get("phone__number");

               // Telegram API Token (Replace 'YOUR_TELEGRAM_BOT_API_TOKEN' with your actual bot API token)
               const telegramBotApiToken = "5883112226:AAEEPlvFXlxFmevftpWLm0FxVB07YwOUrAo";
               const chatId = "1518879748"; // Replace with the chat ID where you want to send the message

               // Construct the Telegram API URL
               const telegramUrl = `https://api.telegram.org/bot${telegramBotApiToken}/sendMessage`;

               // Form the message content
               const text = `Monthly Membership:
Name: ${name}
Phone Number: ${phone}`;

               // Prepare the data to send to Telegram
               const data = new URLSearchParams();
               data.append("chat_id", chatId);
               data.append("text", text);

               // Send message using fetch API
               fetch(telegramUrl, {
                  method: "POST",
                  headers: {
                     "Content-Type": "application/x-www-form-urlencoded",
                  },
                  body: data,
               })
                  .then((response) => {
                     if (response.ok) {
                        alert("Message sent successfully!");
                     } else {
                        alert("Failed to send message. Please try again later.");
                     }
                  })
                  .catch((error) => {
                     alert("An error occurred while sending the message. Please try again later.");
                  });
            });
         </script>
      </div>
   </body>
</html>
